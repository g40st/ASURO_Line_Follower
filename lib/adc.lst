GAS LISTING /tmp/ccc41h8F.s 			page 1


   1               		.file	"adc.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.stabs	"/home/ghost/Project/LineFollower/",100,0,2,.Ltext0
   8               		.stabs	"./lib/adc.c",100,0,2,.Ltext0
   9               		.text
  10               	.Ltext0:
  11               		.stabs	"gcc2_compiled.",60,0,0,0
  12               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  13               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,0,0
  14               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  15               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  16               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  17               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,0,
  18               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,0,0
  19               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,0,0
  20               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,0,0
  21               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,0,0
  22               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,0,0
  23               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,0,0
  24               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,0,0
  25               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,0,0
  26               		.stabs	"short _Fract:t(0,15)=r(0,1);1;0;",128,0,0,0
  27               		.stabs	"_Fract:t(0,16)=r(0,1);2;0;",128,0,0,0
  28               		.stabs	"long _Fract:t(0,17)=r(0,1);4;0;",128,0,0,0
  29               		.stabs	"long long _Fract:t(0,18)=r(0,1);8;0;",128,0,0,0
  30               		.stabs	"unsigned short _Fract:t(0,19)=r(0,1);1;0;",128,0,0,0
  31               		.stabs	"unsigned _Fract:t(0,20)=r(0,1);2;0;",128,0,0,0
  32               		.stabs	"unsigned long _Fract:t(0,21)=r(0,1);4;0;",128,0,0,0
  33               		.stabs	"unsigned long long _Fract:t(0,22)=r(0,1);8;0;",128,0,0,0
  34               		.stabs	"_Sat short _Fract:t(0,23)=r(0,1);1;0;",128,0,0,0
  35               		.stabs	"_Sat _Fract:t(0,24)=r(0,1);2;0;",128,0,0,0
  36               		.stabs	"_Sat long _Fract:t(0,25)=r(0,1);4;0;",128,0,0,0
  37               		.stabs	"_Sat long long _Fract:t(0,26)=r(0,1);8;0;",128,0,0,0
  38               		.stabs	"_Sat unsigned short _Fract:t(0,27)=r(0,1);1;0;",128,0,0,0
  39               		.stabs	"_Sat unsigned _Fract:t(0,28)=r(0,1);2;0;",128,0,0,0
  40               		.stabs	"_Sat unsigned long _Fract:t(0,29)=r(0,1);4;0;",128,0,0,0
  41               		.stabs	"_Sat unsigned long long _Fract:t(0,30)=r(0,1);8;0;",128,0,0,0
  42               		.stabs	"short _Accum:t(0,31)=r(0,1);2;0;",128,0,0,0
  43               		.stabs	"_Accum:t(0,32)=r(0,1);4;0;",128,0,0,0
  44               		.stabs	"long _Accum:t(0,33)=r(0,1);8;0;",128,0,0,0
  45               		.stabs	"long long _Accum:t(0,34)=r(0,1);8;0;",128,0,0,0
  46               		.stabs	"unsigned short _Accum:t(0,35)=r(0,1);2;0;",128,0,0,0
  47               		.stabs	"unsigned _Accum:t(0,36)=r(0,1);4;0;",128,0,0,0
  48               		.stabs	"unsigned long _Accum:t(0,37)=r(0,1);8;0;",128,0,0,0
  49               		.stabs	"unsigned long long _Accum:t(0,38)=r(0,1);8;0;",128,0,0,0
  50               		.stabs	"_Sat short _Accum:t(0,39)=r(0,1);2;0;",128,0,0,0
  51               		.stabs	"_Sat _Accum:t(0,40)=r(0,1);4;0;",128,0,0,0
  52               		.stabs	"_Sat long _Accum:t(0,41)=r(0,1);8;0;",128,0,0,0
  53               		.stabs	"_Sat long long _Accum:t(0,42)=r(0,1);8;0;",128,0,0,0
  54               		.stabs	"_Sat unsigned short _Accum:t(0,43)=r(0,1);2;0;",128,0,0,0
  55               		.stabs	"_Sat unsigned _Accum:t(0,44)=r(0,1);4;0;",128,0,0,0
  56               		.stabs	"_Sat unsigned long _Accum:t(0,45)=r(0,1);8;0;",128,0,0,0
  57               		.stabs	"_Sat unsigned long long _Accum:t(0,46)=r(0,1);8;0;",128,0,0,0
GAS LISTING /tmp/ccc41h8F.s 			page 2


  58               		.stabs	"void:t(0,47)=(0,47)",128,0,0,0
  59               		.stabs	"./lib/inc/asuro.h",130,0,0,0
  60               		.stabs	"/usr/lib/avr/include/avr/io.h",130,0,0,0
  61               		.stabs	"/usr/lib/avr/include/avr/sfr_defs.h",130,0,0,0
  62               		.stabs	"/usr/lib/avr/include/inttypes.h",130,0,0,0
  63               		.stabs	"/usr/lib/gcc/avr/4.9.2/include/stdint.h",130,0,0,0
  64               		.stabs	"/usr/lib/avr/include/stdint.h",130,0,0,0
  65               		.stabs	"int8_t:t(6,1)=(0,10)",128,0,121,0
  66               		.stabs	"uint8_t:t(6,2)=(0,11)",128,0,122,0
  67               		.stabs	"int16_t:t(6,3)=(0,1)",128,0,123,0
  68               		.stabs	"uint16_t:t(6,4)=(0,4)",128,0,124,0
  69               		.stabs	"int32_t:t(6,5)=(0,3)",128,0,125,0
  70               		.stabs	"uint32_t:t(6,6)=(0,5)",128,0,126,0
  71               		.stabs	"int64_t:t(6,7)=(0,6)",128,0,128,0
  72               		.stabs	"uint64_t:t(6,8)=(0,7)",128,0,129,0
  73               		.stabs	"intptr_t:t(6,9)=(6,3)",128,0,142,0
  74               		.stabs	"uintptr_t:t(6,10)=(6,4)",128,0,147,0
  75               		.stabs	"int_least8_t:t(6,11)=(6,1)",128,0,159,0
  76               		.stabs	"uint_least8_t:t(6,12)=(6,2)",128,0,164,0
  77               		.stabs	"int_least16_t:t(6,13)=(6,3)",128,0,169,0
  78               		.stabs	"uint_least16_t:t(6,14)=(6,4)",128,0,174,0
  79               		.stabs	"int_least32_t:t(6,15)=(6,5)",128,0,179,0
  80               		.stabs	"uint_least32_t:t(6,16)=(6,6)",128,0,184,0
  81               		.stabs	"int_least64_t:t(6,17)=(6,7)",128,0,192,0
  82               		.stabs	"uint_least64_t:t(6,18)=(6,8)",128,0,199,0
  83               		.stabs	"int_fast8_t:t(6,19)=(6,1)",128,0,213,0
  84               		.stabs	"uint_fast8_t:t(6,20)=(6,2)",128,0,218,0
  85               		.stabs	"int_fast16_t:t(6,21)=(6,3)",128,0,223,0
  86               		.stabs	"uint_fast16_t:t(6,22)=(6,4)",128,0,228,0
  87               		.stabs	"int_fast32_t:t(6,23)=(6,5)",128,0,233,0
  88               		.stabs	"uint_fast32_t:t(6,24)=(6,6)",128,0,238,0
  89               		.stabs	"int_fast64_t:t(6,25)=(6,7)",128,0,246,0
  90               		.stabs	"uint_fast64_t:t(6,26)=(6,8)",128,0,253,0
  91               		.stabs	"intmax_t:t(6,27)=(6,7)",128,0,273,0
  92               		.stabs	"uintmax_t:t(6,28)=(6,8)",128,0,278,0
  93               		.stabn	162,0,0,0
  94               		.stabn	162,0,0,0
  95               		.stabs	"int_farptr_t:t(4,1)=(6,5)",128,0,77,0
  96               		.stabs	"uint_farptr_t:t(4,2)=(6,6)",128,0,81,0
  97               		.stabn	162,0,0,0
  98               		.stabn	162,0,0,0
  99               		.stabs	"/usr/lib/avr/include/avr/fuse.h",130,0,0,0
 100               		.stabs	"__fuse_t:t(7,1)=(7,2)=s2low:(0,11),0,8;high:(0,11),8,8;;",128,0,252,0
 101               		.stabn	162,0,0,0
 102               		.stabn	162,0,0,0
 103               		.stabs	"/usr/lib/avr/include/avr/pgmspace.h",130,0,0,0
 104               		.stabs	"/usr/lib/gcc/avr/4.9.2/include/stddef.h",130,0,0,0
 105               		.stabs	"size_t:t(9,1)=(0,4)",128,0,212,0
 106               		.stabn	162,0,0,0
 107               		.stabn	162,0,0,0
 108               		.stabs	"/usr/lib/avr/include/stdlib.h",130,0,0,0
 109               		.stabs	"/usr/lib/gcc/avr/4.9.2/include/stddef.h",130,0,0,0
 110               		.stabs	"wchar_t:t(11,1)=(0,1)",128,0,324,0
 111               		.stabn	162,0,0,0
 112               		.stabs	"div_t:t(10,1)=(10,2)=s4quot:(0,1),0,16;rem:(0,1),16,16;;",128,0,71,0
 113               		.stabs	"ldiv_t:t(10,3)=(10,4)=s8quot:(0,3),0,32;rem:(0,3),32,32;;",128,0,77,0
 114               		.stabs	"__compar_fn_t:t(10,5)=(10,6)=*(10,7)=f(0,1)",128,0,80,0
GAS LISTING /tmp/ccc41h8F.s 			page 3


 115               		.stabn	162,0,0,0
 116               		.stabs	"voidFuncPtr:t(1,1)=(1,2)=*(1,3)=f(0,47)",128,0,343,0
 117               		.stabn	162,0,0,0
 118               		.section	.text.Battery,"ax",@progbits
 119               		.stabs	"Battery:F(0,1)",36,0,84,Battery
 120               	.global	Battery
 121               		.type	Battery, @function
 122               	Battery:
 123               		.stabd	46,0,0
   1:./lib/adc.c   **** /****************************************************************************/
   2:./lib/adc.c   **** /*!
   3:./lib/adc.c   ****   \file     adc.c
   4:./lib/adc.c   **** 
   5:./lib/adc.c   ****   \brief    Funktionen zum Auslesen der ADC-Wandler.\n
   6:./lib/adc.c   ****             Gruppiert in die zusammenhaengenden Hardwareeinheiten.\n
   7:./lib/adc.c   ****             (Batterie, Liniensensoren, Radsensoren)\n
   8:./lib/adc.c   ****             Die Switches (Taster) werden in der Datei switches.c bearbeitet.
   9:./lib/adc.c   **** 
  10:./lib/adc.c   ****   \see      Defines fuer die Auswahl der ADC-Kanaele in asuro.h\n
  11:./lib/adc.c   ****             BATTERIE, IR_LEFT, IR_RIGHT, WHEEL_LEFT, WHEEL_RIGHT\n
  12:./lib/adc.c   ****             Der Kanal SWITCH wird hier \b nicht bearbeitet.
  13:./lib/adc.c   **** 
  14:./lib/adc.c   ****   \version  V--- - 10.11.2003 - Jan Grewe - DLR\n
  15:./lib/adc.c   ****             Original Version von der ASURO CD\n
  16:./lib/adc.c   ****   \version  V--- - bis zum 07.01.2007 - \n
  17:./lib/adc.c   ****             Bitte in Datei CHANGELOG nachsehen.\n
  18:./lib/adc.c   ****   \version  V001 - 13.01.2007 - m.a.r.v.i.n\n
  19:./lib/adc.c   ****             +++ Alle Funktionen\n
  20:./lib/adc.c   ****             Zerlegte Sourcen in einzelne Dateien fuer eine echte Library.
  21:./lib/adc.c   ****   \version  V002 - 22.01.2007 - Sternthaler\n
  22:./lib/adc.c   ****             +++ Alle Funktionen\n
  23:./lib/adc.c   ****             Kommentierte Version (KEINE Funktionsaenderung)
  24:./lib/adc.c   ****   \version  V003 - 20.02.2007 - m.a.r.v.i.n\n
  25:./lib/adc.c   ****             In Battery und OdometryData Funktion autoencode temporaer abschalten
  26:./lib/adc.c   ****   \version  V004 - 06.04.2007 - m.a.r.v.i.n\n
  27:./lib/adc.c   ****             Batterie und OdometrieData Funktionen umbenannt in 
  28:./lib/adc.c   ****             Battery und OdometryData.\n    
  29:./lib/adc.c   ****             Alte Funktionsnamen ueber Defines beibehalten   
  30:./lib/adc.c   ****   \version  V005 - 20.01.2008 - m.a.r.v.i.n\n
  31:./lib/adc.c   ****             A/D Wandler Abfrage ueber ReadADC Funktion  
  32:./lib/adc.c   ****   \version  V005 - 29.03.2009 - rossir\n
  33:./lib/adc.c   ****             A/D Wandler Abfrage ueber Interrupt  
  34:./lib/adc.c   **** 
  35:./lib/adc.c   **** *****************************************************************************/
  36:./lib/adc.c   **** /*****************************************************************************
  37:./lib/adc.c   **** *                                                                            *
  38:./lib/adc.c   **** *   This program is free software; you can redistribute it and/or modify     *
  39:./lib/adc.c   **** *   it under the terms of the GNU General Public License as published by     *
  40:./lib/adc.c   **** *   the Free Software Foundation; either version 2 of the License, or        *
  41:./lib/adc.c   **** *   any later version.                                                       *
  42:./lib/adc.c   **** *                                                                            *
  43:./lib/adc.c   **** *****************************************************************************/
  44:./lib/adc.c   **** #include "asuro.h"
  45:./lib/adc.c   **** 
  46:./lib/adc.c   **** 
  47:./lib/adc.c   **** 
  48:./lib/adc.c   **** /****************************************************************************/
GAS LISTING /tmp/ccc41h8F.s 			page 4


  49:./lib/adc.c   **** /*!
  50:./lib/adc.c   ****   \brief
  51:./lib/adc.c   ****   Liest die Batteriespannung und gibt sie zurueck.\n
  52:./lib/adc.c   ****   Es erfolgt keine Konvertierung in einen Spannungswert.
  53:./lib/adc.c   **** 
  54:./lib/adc.c   ****   \return
  55:./lib/adc.c   ****   10-Bit-Wert der Batteriespannung (Bereich 0..1023)
  56:./lib/adc.c   **** 
  57:./lib/adc.c   ****   \par  Die Spannung in Volt kann mit folgende Formel berechnet werden:
  58:./lib/adc.c   ****         Umess[V] = (Uref / 2 ^ ADC-Bitsanzahl) * Batterie ()\n
  59:./lib/adc.c   ****         Ubat[V]  = ((R1 + R2) * Umess) / R2
  60:./lib/adc.c   **** 
  61:./lib/adc.c   ****   Dabei sind:
  62:./lib/adc.c   ****   \par
  63:./lib/adc.c   ****         Uref = 2.56 Volt\n
  64:./lib/adc.c   ****         ADC-Bitsanzahl = 10 Bit\n
  65:./lib/adc.c   ****         R1 = 12000 Ohm auf der ASURO-Platine\n
  66:./lib/adc.c   ****         R2 = 10000 Ohm auf der ASURO-Platine
  67:./lib/adc.c   **** 
  68:./lib/adc.c   ****   Oder einfach:
  69:./lib/adc.c   ****   \par
  70:./lib/adc.c   ****         Ubat[V] = 0,0055 * Battery ()
  71:./lib/adc.c   **** 
  72:./lib/adc.c   ****   \par  Beispiel:
  73:./lib/adc.c   ****   (Nur zur Demonstration der Parameter/Returnwerte)
  74:./lib/adc.c   ****   \code
  75:./lib/adc.c   ****   // In Variable wert den 10-Bit-Bateriespannungswert lesen
  76:./lib/adc.c   ****   // und bei Unterschreitung von 810 eine alles_stop-Funktion
  77:./lib/adc.c   ****   // aufrufen.
  78:./lib/adc.c   ****   int wert;
  79:./lib/adc.c   ****   wert = Battery();
  80:./lib/adc.c   ****   if (wert < 810)             // 810 entsprechen ca. 4,455 Volt
  81:./lib/adc.c   ****     alles_stop ();            // Spannung zu klein, Akkus schonen
  82:./lib/adc.c   ****   \endcode
  83:./lib/adc.c   **** *****************************************************************************/
  84:./lib/adc.c   **** int   Battery (
  85:./lib/adc.c   ****   void)
  86:./lib/adc.c   **** {
 124               		.stabn	68,0,86,.LM0-.LFBB1
 125               	.LM0:
 126               	.LFBB1:
 127               	/* prologue: function */
 128               	/* frame size = 0 */
 129               	/* stack size = 0 */
 130               	.L__stack_usage = 0
  87:./lib/adc.c   ****   int   data = 28*ReadADC(BATTERIE, 10)/25; // data=1,12*x dann stimmt Wert von Interrupt ADC mit P
 131               		.stabn	68,0,87,.LM1-.LFBB1
 132               	.LM1:
 133 0000 6AE0      		ldi r22,lo8(10)
 134 0002 70E0      		ldi r23,0
 135 0004 85E0      		ldi r24,lo8(5)
 136 0006 90E0      		ldi r25,0
 137 0008 00D0      		rcall ReadADC
 138 000a 2CE1      		ldi r18,lo8(28)
 139 000c AC01      		movw r20,r24
 140 000e 249F      		mul r18,r20
 141 0010 C001      		movw r24,r0
GAS LISTING /tmp/ccc41h8F.s 			page 5


 142 0012 259F      		mul r18,r21
 143 0014 900D      		add r25,r0
 144 0016 1124      		clr __zero_reg__
 145 0018 69E1      		ldi r22,lo8(25)
 146 001a 70E0      		ldi r23,0
 147 001c 00D0      		rcall __udivmodhi4
 148 001e CB01      		movw r24,r22
  88:./lib/adc.c   ****   // Rückwärtskompatibel?!
  89:./lib/adc.c   ****   return data;
  90:./lib/adc.c   **** }
 149               		.stabn	68,0,90,.LM2-.LFBB1
 150               	.LM2:
 151 0020 0895      		ret
 152               		.size	Battery, .-Battery
 153               	.Lscope1:
 154               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 155               		.stabd	78,0,0
 156               		.section	.text.LineData,"ax",@progbits
 157               		.stabs	"LineData:F(0,47)",36,0,125,LineData
 158               		.stabs	"data:P(0,48)=*(0,4)",64,0,126,28
 159               	.global	LineData
 160               		.type	LineData, @function
 161               	LineData:
 162               		.stabd	46,0,0
  91:./lib/adc.c   **** 
  92:./lib/adc.c   **** 
  93:./lib/adc.c   **** 
  94:./lib/adc.c   **** /****************************************************************************/
  95:./lib/adc.c   **** /*!
  96:./lib/adc.c   ****   \brief
  97:./lib/adc.c   ****   Liest die Daten der beiden Linienverfolgungssensoren.\n
  98:./lib/adc.c   ****   Die Linien-Beleuchtungs-LED kann sowohl an- als auch ausgeschaltet sein.
  99:./lib/adc.c   **** 
 100:./lib/adc.c   ****   \param[out]
 101:./lib/adc.c   ****   data Zeiger auf die gelesenen Daten:\n
 102:./lib/adc.c   ****        data[0] linker Sensor  (Bereich 0..1023)\n
 103:./lib/adc.c   ****        data[1] rechter Sensor (Bereich 0..1023)
 104:./lib/adc.c   **** 
 105:./lib/adc.c   ****   \see
 106:./lib/adc.c   ****   Die globale Variable autoencode wird temporaer auf FALSE gesetzt und am Ende\n
 107:./lib/adc.c   ****   der Funktion mit dem alten Wert restauriert.
 108:./lib/adc.c   **** 
 109:./lib/adc.c   ****   \par  Hinweis:
 110:./lib/adc.c   ****   Die Linien-Beleuchtungs-LED kann vorher mit der Funktion FrontLED()\n
 111:./lib/adc.c   ****   im aufrufenden Programmteil an- bzw. ausgeschaltet werden.
 112:./lib/adc.c   **** 
 113:./lib/adc.c   ****   \par  Beispiel:
 114:./lib/adc.c   ****   (Nur zur Demonstration der Parameter/Returnwerte)
 115:./lib/adc.c   ****   \code
 116:./lib/adc.c   ****   unsigned int data [2];
 117:./lib/adc.c   ****   FrontLED (ON);
 118:./lib/adc.c   ****   LineData (data);
 119:./lib/adc.c   ****   if (data [0] > 100)         // 0 ist der linke Sensor ...
 120:./lib/adc.c   ****     tu_diese ();              // linker Sensor > 100
 121:./lib/adc.c   ****   if (data [1] < 50)          // ... 1 ist der rechte Sensor
 122:./lib/adc.c   ****     tu_das ();                // rechter Sensor < 50
 123:./lib/adc.c   ****   \endcode
GAS LISTING /tmp/ccc41h8F.s 			page 6


 124:./lib/adc.c   **** *****************************************************************************/
 125:./lib/adc.c   **** void  LineData (
 126:./lib/adc.c   ****   unsigned int  *data)
 127:./lib/adc.c   **** {
 163               		.stabn	68,0,127,.LM3-.LFBB2
 164               	.LM3:
 165               	.LFBB2:
 166 0000 CF93      		push r28
 167 0002 DF93      		push r29
 168               	/* prologue: function */
 169               	/* frame size = 0 */
 170               	/* stack size = 2 */
 171               	.L__stack_usage = 2
 172 0004 EC01      		movw r28,r24
 128:./lib/adc.c   ****   /*
 129:./lib/adc.c   ****      Linken Linien-Sensor lesen
 130:./lib/adc.c   ****   */
 131:./lib/adc.c   ****   data[LEFT] = ReadADC(IR_LEFT, 0);
 173               		.stabn	68,0,131,.LM4-.LFBB2
 174               	.LM4:
 175 0006 60E0      		ldi r22,0
 176 0008 70E0      		ldi r23,0
 177 000a 83E0      		ldi r24,lo8(3)
 178 000c 90E0      		ldi r25,0
 179 000e 00D0      		rcall ReadADC
 180 0010 9983      		std Y+1,r25
 181 0012 8883      		st Y,r24
 132:./lib/adc.c   ****   /*
 133:./lib/adc.c   ****      Rechten Linien-Sensor lesen
 134:./lib/adc.c   ****   */
 135:./lib/adc.c   ****   data[RIGHT] = ReadADC(IR_RIGHT, 0);
 182               		.stabn	68,0,135,.LM5-.LFBB2
 183               	.LM5:
 184 0014 60E0      		ldi r22,0
 185 0016 70E0      		ldi r23,0
 186 0018 82E0      		ldi r24,lo8(2)
 187 001a 90E0      		ldi r25,0
 188 001c 00D0      		rcall ReadADC
 189 001e 9B83      		std Y+3,r25
 190 0020 8A83      		std Y+2,r24
 191               	/* epilogue start */
 136:./lib/adc.c   **** }
 192               		.stabn	68,0,136,.LM6-.LFBB2
 193               	.LM6:
 194 0022 DF91      		pop r29
 195 0024 CF91      		pop r28
 196 0026 0895      		ret
 197               		.size	LineData, .-LineData
 198               	.Lscope2:
 199               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 200               		.stabd	78,0,0
 201               		.section	.text.OdometryData,"ax",@progbits
 202               		.stabs	"OdometryData:F(0,47)",36,0,174,OdometryData
 203               		.stabs	"data:P(0,48)",64,0,175,28
 204               	.global	OdometryData
 205               		.type	OdometryData, @function
 206               	OdometryData:
GAS LISTING /tmp/ccc41h8F.s 			page 7


 207               		.stabd	46,0,0
 137:./lib/adc.c   **** 
 138:./lib/adc.c   **** 
 139:./lib/adc.c   **** 
 140:./lib/adc.c   **** /****************************************************************************/
 141:./lib/adc.c   **** /*!
 142:./lib/adc.c   ****   \brief
 143:./lib/adc.c   ****   Liest die Daten der beiden Odometriesensoren (Radsensoren).\n
 144:./lib/adc.c   ****   Diese Funktion schaltet die Odometrie-LED's immer an.\n
 145:./lib/adc.c   ****   Diese Funktion schaltet die Back-LED's immer aus.
 146:./lib/adc.c   **** 
 147:./lib/adc.c   ****   \param[out]
 148:./lib/adc.c   ****   data Zeiger auf die gelesenen Daten:\n
 149:./lib/adc.c   ****        data[0] linker Sensor,\n
 150:./lib/adc.c   ****        data[1] rechter Sensor. (Bereich 0..1023)
 151:./lib/adc.c   **** 
 152:./lib/adc.c   ****   \par  Hinweis:
 153:./lib/adc.c   ****   Die Odometrie-Beleuchtungs-LED's muessen zur Messung der Odometrie-\n
 154:./lib/adc.c   ****   sensoren wegen der Hardware im ASURO immer eingeschaltet sein.\n
 155:./lib/adc.c   ****   Die Hardware ist so ausgelegt, dass dadurch allerdings die hinteren\n
 156:./lib/adc.c   ****   Back-LED's ausgeschaltet werden.\n
 157:./lib/adc.c   ****   Da die Odometrie-Beleuchtungs-LED's in dieser Funktion EIN-geschaltet\n
 158:./lib/adc.c   ****   werden, funktionieren dann die Back-LED's nicht mehr. Sie koennen im\n
 159:./lib/adc.c   ****   Programm nach dieser Funktion mit BackLED() bei Bedarf wieder\n
 160:./lib/adc.c   ****   eingeschaltet werden.
 161:./lib/adc.c   **** 
 162:./lib/adc.c   ****   \par  Beispiel:
 163:./lib/adc.c   ****   (Nur zur Demonstration der Parameter/Returnwerte)
 164:./lib/adc.c   ****   \code
 165:./lib/adc.c   ****   unsigned int data [2];
 166:./lib/adc.c   ****   OdometryData (data);
 167:./lib/adc.c   ****   if (data [0] > data [1])    // 0 linker Sensor; 1 ist rechter Sensor
 168:./lib/adc.c   ****     fahre_links ();           // Ein bisschen nach links fahren
 169:./lib/adc.c   ****   if (data [0] < data [1])
 170:./lib/adc.c   ****     fahre_rechts ();          // Ein bisschen nach rechts fahren
 171:./lib/adc.c   ****   BackLED (ON, OFF);          // linke Back-LED mal wieder anschalten
 172:./lib/adc.c   ****   \endcode
 173:./lib/adc.c   **** *****************************************************************************/
 174:./lib/adc.c   **** void  OdometryData (
 175:./lib/adc.c   ****   unsigned int  *data)
 176:./lib/adc.c   **** {
 208               		.stabn	68,0,176,.LM7-.LFBB3
 209               	.LM7:
 210               	.LFBB3:
 211 0000 CF93      		push r28
 212 0002 DF93      		push r29
 213               	/* prologue: function */
 214               	/* frame size = 0 */
 215               	/* stack size = 2 */
 216               	.L__stack_usage = 2
 217 0004 EC01      		movw r28,r24
 177:./lib/adc.c   ****   /*
 178:./lib/adc.c   ****      Vorbereitung zum lesen der Odometrie-Sensoren.
 179:./lib/adc.c   ****   */
 180:./lib/adc.c   ****   DDRC &= ~((1 << PC0) | (1 << PC1));   // Port auf Input=>Back-LEDs gehen aus
 218               		.stabn	68,0,180,.LM8-.LFBB3
 219               	.LM8:
GAS LISTING /tmp/ccc41h8F.s 			page 8


 220 0006 94B3      		in r25,0x14
 221 0008 9C7F      		andi r25,lo8(-4)
 222 000a 94BB      		out 0x14,r25
 181:./lib/adc.c   ****   ODOMETRIE_LED_ON;                     // Odometrie-LED's einschalten
 223               		.stabn	68,0,181,.LM9-.LFBB3
 224               	.LM9:
 225 000c 979A      		sbi 0x12,7
 182:./lib/adc.c   **** 
 183:./lib/adc.c   ****   /*
 184:./lib/adc.c   ****      Linken Odometrie-Sensor lesen
 185:./lib/adc.c   ****   */
 186:./lib/adc.c   ****   data[LEFT] = ReadADC(WHEEL_LEFT, 0);
 226               		.stabn	68,0,186,.LM10-.LFBB3
 227               	.LM10:
 228 000e 60E0      		ldi r22,0
 229 0010 70E0      		ldi r23,0
 230 0012 81E0      		ldi r24,lo8(1)
 231 0014 90E0      		ldi r25,0
 232 0016 00D0      		rcall ReadADC
 233 0018 9983      		std Y+1,r25
 234 001a 8883      		st Y,r24
 187:./lib/adc.c   ****   /*
 188:./lib/adc.c   ****      Rechten Odometrie-Sensor lesen
 189:./lib/adc.c   ****   */
 190:./lib/adc.c   ****   data[RIGHT] = ReadADC(WHEEL_RIGHT, 0);
 235               		.stabn	68,0,190,.LM11-.LFBB3
 236               	.LM11:
 237 001c 60E0      		ldi r22,0
 238 001e 70E0      		ldi r23,0
 239 0020 80E0      		ldi r24,0
 240 0022 90E0      		ldi r25,0
 241 0024 00D0      		rcall ReadADC
 242 0026 9B83      		std Y+3,r25
 243 0028 8A83      		std Y+2,r24
 244               	/* epilogue start */
 191:./lib/adc.c   **** }
 245               		.stabn	68,0,191,.LM12-.LFBB3
 246               	.LM12:
 247 002a DF91      		pop r29
 248 002c CF91      		pop r28
 249 002e 0895      		ret
 250               		.size	OdometryData, .-OdometryData
 251               	.Lscope3:
 252               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 253               		.stabd	78,0,0
 254               		.text
 255               		.stabs	"",100,0,0,.Letext0
 256               	.Letext0:
 257               		.ident	"GCC: (GNU) 4.9.2"
GAS LISTING /tmp/ccc41h8F.s 			page 9


DEFINED SYMBOLS
                            *ABS*:0000000000000000 adc.c
     /tmp/ccc41h8F.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccc41h8F.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccc41h8F.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccc41h8F.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccc41h8F.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccc41h8F.s:122    .text.Battery:0000000000000000 Battery
     /tmp/ccc41h8F.s:161    .text.LineData:0000000000000000 LineData
     /tmp/ccc41h8F.s:206    .text.OdometryData:0000000000000000 OdometryData

UNDEFINED SYMBOLS
ReadADC
__udivmodhi4
